Ext.data.JsonP.Lumenize_TimeSeriesCalculator({"tagname":"class","name":"Lumenize.TimeSeriesCalculator","extends":null,"mixins":[],"alternateClassNames":[],"aliases":{},"singleton":false,"requires":[],"uses":[],"enum":null,"override":null,"inheritable":null,"inheritdoc":null,"meta":{},"private":null,"id":"class-Lumenize.TimeSeriesCalculator","members":{"cfg":[{"name":"deriveFieldsAfterSummary","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-deriveFieldsAfterSummary"},{"name":"deriveFieldsOnInput","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-deriveFieldsOnInput"},{"name":"deriveFieldsOnOutput","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-deriveFieldsOnOutput"},{"name":"granularity","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-granularity"},{"name":"holidays","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-holidays"},{"name":"metrics","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{"required":true},"id":"cfg-metrics"},{"name":"summaryMetricsConfig","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-summaryMetricsConfig"},{"name":"tz","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-tz"},{"name":"uniqueIDField","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-uniqueIDField"},{"name":"validFromField","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-validFromField"},{"name":"validToField","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-validToField"},{"name":"workDayEndBefore","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-workDayEndBefore"},{"name":"workDayStartOn","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-workDayStartOn"},{"name":"workDays","tagname":"cfg","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"cfg-workDays"}],"property":[],"method":[{"name":"constructor","tagname":"method","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"method-constructor"},{"name":"addSnapshots","tagname":"method","owner":"Lumenize.TimeSeriesCalculator","meta":{"chainable":true},"id":"method-addSnapshots"},{"name":"getResults","tagname":"method","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"method-getResults"},{"name":"getStateForSaving","tagname":"method","owner":"Lumenize.TimeSeriesCalculator","meta":{},"id":"method-getStateForSaving"}],"event":[],"css_var":[],"css_mixin":[]},"linenr":14,"files":[{"filename":"TimeSeriesCalculator.coffee.js","href":"TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator"}],"html_meta":{},"statics":{"cfg":[],"property":[],"method":[{"name":"newFromSavedState","tagname":"method","owner":"Lumenize.TimeSeriesCalculator","meta":{"static":true},"id":"static-method-newFromSavedState"}],"event":[],"css_var":[],"css_mixin":[]},"component":false,"superclasses":[],"subclasses":[],"mixedInto":[],"parentMixins":[],"html":"<div><pre class=\"hierarchy\"><h4>Files</h4><div class='dependency'><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator' target='_blank'>TimeSeriesCalculator.coffee.js</a></div></pre><div class='doc-contents'><p>This calculator is used to convert snapshot data into time series aggregations.</p>\n\n<p>Below is a detailed example. Let's start with a fairly large set of snapshots and create a bunch of series for\na burn (up/down) chart.</p>\n\n<pre><code>lumenize = require('../')\n{TimeSeriesCalculator, Time} = lumenize\n\nsnapshotsCSV = [\n  [\"ObjectID\", \"_ValidFrom\",               \"_ValidTo\",                 \"ScheduleState\", \"PlanEstimate\", \"TaskRemainingTotal\", \"TaskEstimateTotal\"],\n\n  [1,          \"2010-10-10T15:00:00.000Z\", \"2011-01-02T13:00:00.000Z\", \"Ready to pull\", 5             , 15                  , 15],\n\n  [1,          \"2011-01-02T13:00:00.000Z\", \"2011-01-02T15:10:00.000Z\", \"Ready to pull\", 5             , 15                  , 15],\n  [1,          \"2011-01-02T15:10:00.000Z\", \"2011-01-03T15:00:00.000Z\", \"In progress\"  , 5             , 20                  , 15],\n  [2,          \"2011-01-02T15:00:00.000Z\", \"2011-01-03T15:00:00.000Z\", \"Ready to pull\", 3             , 5                   , 5],\n  [3,          \"2011-01-02T15:00:00.000Z\", \"2011-01-03T15:00:00.000Z\", \"Ready to pull\", 5             , 12                  , 12],\n\n  [2,          \"2011-01-03T15:00:00.000Z\", \"2011-01-04T15:00:00.000Z\", \"In progress\"  , 3             , 5                   , 5],\n  [3,          \"2011-01-03T15:00:00.000Z\", \"2011-01-04T15:00:00.000Z\", \"Ready to pull\", 5             , 12                  , 12],\n  [4,          \"2011-01-03T15:00:00.000Z\", \"2011-01-04T15:00:00.000Z\", \"Ready to pull\", 5             , 15                  , 15],\n  [1,          \"2011-01-03T15:10:00.000Z\", \"2011-01-04T15:00:00.000Z\", \"In progress\"  , 5             , 12                  , 15],\n\n  [1,          \"2011-01-04T15:00:00.000Z\", \"2011-01-06T15:00:00.000Z\", \"Accepted\"     , 5             , 0                   , 15],\n  [2,          \"2011-01-04T15:00:00.000Z\", \"2011-01-06T15:00:00.000Z\", \"In test\"      , 3             , 1                   , 5],\n  [3,          \"2011-01-04T15:00:00.000Z\", \"2011-01-05T15:00:00.000Z\", \"In progress\"  , 5             , 10                  , 12],\n  [4,          \"2011-01-04T15:00:00.000Z\", \"2011-01-06T15:00:00.000Z\", \"Ready to pull\", 5             , 15                  , 15],\n  [5,          \"2011-01-04T15:00:00.000Z\", \"2011-01-06T15:00:00.000Z\", \"Ready to pull\", 2             , 4                   , 4],\n\n  [3,          \"2011-01-05T15:00:00.000Z\", \"2011-01-07T15:00:00.000Z\", \"In test\"      , 5             , 5                   , 12],\n\n  [1,          \"2011-01-06T15:00:00.000Z\", \"2011-01-07T15:00:00.000Z\", \"Released\"     , 5             , 0                   , 15],\n  [2,          \"2011-01-06T15:00:00.000Z\", \"2011-01-07T15:00:00.000Z\", \"Accepted\"     , 3             , 0                   , 5],\n  [4,          \"2011-01-06T15:00:00.000Z\", \"2011-01-07T15:00:00.000Z\", \"In progress\"  , 5             , 7                   , 15],\n  [5,          \"2011-01-06T15:00:00.000Z\", \"2011-01-07T15:00:00.000Z\", \"Ready to pull\", 2             , 4                   , 4],\n\n  [1,          \"2011-01-07T15:00:00.000Z\", \"9999-01-01T00:00:00.000Z\", \"Released\"     , 5            , 0                    , 15],\n  [2,          \"2011-01-07T15:00:00.000Z\", \"9999-01-01T00:00:00.000Z\", \"Released\"     , 3            , 0                    , 5],\n  [3,          \"2011-01-07T15:00:00.000Z\", \"9999-01-01T00:00:00.000Z\", \"Accepted\"     , 5            , 0                    , 12],\n  [4,          \"2011-01-07T15:00:00.000Z\", \"9999-01-01T00:00:00.000Z\", \"In test\"      , 5            , 3                    , 15]  # Note: ObjectID 5 deleted\n]\n\nsnapshots = lumenize.csvStyleArray_To_ArrayOfMaps(snapshotsCSV)\n</code></pre>\n\n<p>Now that we have the data, let's configure our analysis by starting with the granularity, timezone, and holidays.</p>\n\n<pre><code>granularity = lumenize.Time.DAY\ntz = 'America/Chicago'\nholidays = [\n  {year: 2011, month: 1, day: 5}  # Made up holiday to test knockout\n]\n</code></pre>\n\n<p>Now, let's add our first aggregation specification. These derived fields will act as filters for the determining\nwhat stories are counted in the AcceptedStoryCount and AcceptedStoryPoints metrics.</p>\n\n<pre><code>deriveFieldsOnInput = [\n  {field: 'AcceptedStoryCount', f: (row) -&gt;\n    if row.ScheduleState in ['Accepted', 'Released']\n      return 1\n    else\n      return 0\n  },\n  {field: 'AcceptedStoryPoints', f: (row) -&gt;\n    if row.ScheduleState in ['Accepted', 'Released']\n      return row.PlanEstimate\n    else\n      return 0\n  }\n]\n</code></pre>\n\n<p>Next, we use the native fields in the snapshots, plus the two derived fields above to calculate most of the chart\nseries. Sums and counts are bread and butter, but all <a href=\"#!/api/Lumenize.functions\" rel=\"Lumenize.functions\" class=\"docClass\">Lumenize.functions</a> functions are supported (standardDeviation,\nmedian, percentile coverage, etc.)</p>\n\n<pre><code>metrics = [\n  {as: 'StoryUnitScope', field: 'PlanEstimate', f: 'sum'},\n  {as: 'StoryCountScope', f: 'count'},\n  {as: 'StoryCountBurnUp', field: 'AcceptedStoryCount', f: 'sum'},\n  {as: 'StoryUnitBurnUp', field: 'AcceptedStoryPoints', f: 'sum'},\n  {as: 'TaskUnitBurnDown', field: 'TaskRemainingTotal', f: 'sum'},\n  {as: 'TaskUnitScope', field: 'TaskEstimateTotal', f: 'sum'}  # Note, we don't have the task count denormalized in stories so we can't have TaskCountScope nor TaskUnitBurnDown\n]\n</code></pre>\n\n<p>Next, we specify the summary metrics for the chart. We're not really interested in displaying any summary metrics for\nthis chart but we need to calculate the max values of two of the existing series in order to add the two ideal line series.</p>\n\n<pre><code>summaryMetricsConfig = [\n  {field: 'TaskUnitScope', f: 'max'},\n  {field: 'TaskUnitBurnDown', f: 'max'},\n  {as: 'TaskUnitBurnDown_max_index', f: (seriesData, summaryMetrics) -&gt;\n    for row, index in seriesData\n      if row.TaskUnitBurnDown is summaryMetrics.TaskUnitBurnDown_max\n        return index\n  }\n]\n</code></pre>\n\n<p>The calculations from the summary metrics above are passed into the calculations for derived fields after summary.\nHere is where we calculate two alternatives for the burn down ideal line.</p>\n\n<pre><code>deriveFieldsAfterSummary = [\n  {as: 'Ideal', f: (row, index, summaryMetrics, seriesData) -&gt;\n    max = summaryMetrics.TaskUnitScope_max\n    increments = seriesData.length - 1\n    incrementAmount = max / increments\n    return Math.floor(100 * (max - index * incrementAmount)) / 100\n  },\n  {as: 'Ideal2', f: (row, index, summaryMetrics, seriesData) -&gt;\n    if index &lt; summaryMetrics.TaskUnitBurnDown_max_index\n      return null\n    else\n      max = summaryMetrics.TaskUnitBurnDown_max\n      increments = seriesData.length - 1 - summaryMetrics.TaskUnitBurnDown_max_index\n      incrementAmount = max / increments\n      return Math.floor(100 * (max - (index - summaryMetrics.TaskUnitBurnDown_max_index) * incrementAmount)) / 100\n  }\n]\n</code></pre>\n\n<p>Finally, we build the config Object from the above specifications, instantiate the calculator, and show the results.</p>\n\n<pre><code>config =  # default workDays\n  deriveFieldsOnInput: deriveFieldsOnInput\n  metrics: metrics\n  summaryMetricsConfig: summaryMetricsConfig\n  deriveFieldsAfterSummary: deriveFieldsAfterSummary\n  granularity: granularity\n  tz: tz\n  holidays: holidays\n  workDays: 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday' # They work on Sundays\n\ncalculator = new TimeSeriesCalculator(config)\n\nstartOn = new Time('2011-01-03').getISOStringInTZ(tz)\nendBefore = new Time('2011-01-10').getISOStringInTZ(tz)\n\ncalculator.addSnapshots(snapshots, startOn, endBefore)\n\ncsv = lumenize.arrayOfMaps_To_CSVStyleArray(calculator.getResults().seriesData, true)\n\nconsole.log(csv)\n#  [ [ 'tick',\n#      '_count',\n#      'StoryUnitScope',\n#      'StoryCountScope',\n#      'StoryCountBurnUp',\n#      'StoryUnitBurnUp',\n#      'TaskUnitBurnDown',\n#      'TaskUnitScope',\n#      'Ideal',\n#      'Ideal2' ],\n#    [ '2011-01-03T06:00:00.000Z', 1, 13, 3, 0, 0, 37, 32, 51, null ],\n#    [ '2011-01-04T06:00:00.000Z', 1, 18, 4, 0, 0, 44, 47, 38.25, 44 ],\n#    [ '2011-01-06T06:00:00.000Z', 1, 20, 5, 1, 5, 25, 51, 25.5, 29.33 ],\n#    [ '2011-01-07T06:00:00.000Z', 1, 20, 5, 2, 8, 16, 51, 12.75, 14.66 ],\n#    [ '2011-01-09T06:00:00.000Z', 1, 18, 4, 3, 13, 3, 47, 0, 0 ] ]\n</code></pre>\n\n<p>Note, the <code>_count</code> field should always be 1 indicating that each row in the output is for 1 tick. This is an artifact\nof the underlying OLAPCube calculator and can be ignored.</p>\n</div><div class='members'><div class='members-section'><h3 class='members-title icon-cfg'>Config options</h3><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Required Config options</h3><div id='cfg-metrics' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-metrics' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-metrics' class='name expandable'>metrics</a><span> : Object[]</span><strong class='required signature' >required</strong></div><div class='description'><div class='short'>Array which specifies the metrics to calculate for tick in time. ...</div><div class='long'><p>Array which specifies the metrics to calculate for tick in time.</p>\n\n<p>  Example:</p>\n\n<pre><code>config = {}\nconfig.metrics = [\n  {field: 'field3'},                                      # defaults to metrics: ['sum']\n  {field: 'field4', metrics: [\n    {f: 'sum'},                                           # will add a metric named field4_sum\n    {as: 'median4', f: 'p50'},                            # renamed p50 to median4 from default of field4_p50\n    {as: 'myCount', f: (values) -&gt; return values.length}  # user-supplied function\n  ]}\n]\n</code></pre>\n\n<p>  If you specify a field without any metrics, it will assume you want the sum but it will not automatically\n  add the sum metric to fields with a metrics specification. User-supplied aggregation functions are also supported as\n  shown in the 'myCount' metric above.</p>\n\n<p>  Note, if the metric has dependencies (e.g. average depends upon count and sum) it will automatically add those to\n  your metric definition. If you've already added a dependency but put it under a different \"as\", it's not smart\n  enough to sense that and it will add it again. Either live with the duplication or leave\n  dependency metrics named their default by not providing an \"as\" field.</p>\n<p>Defaults to: <code>[]</code></p></div></div></div></div><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Optional Config options</h3><div id='cfg-deriveFieldsAfterSummary' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-deriveFieldsAfterSummary' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-deriveFieldsAfterSummary' class='name expandable'>deriveFieldsAfterSummary</a><span> : Object[]</span></div><div class='description'><div class='short'>same format at deriveFieldsOnInput, except the callback is in the form f(row, index, @summaryMetrics, @seriesData)\n  ...</div><div class='long'><p>same format at deriveFieldsOnInput, except the callback is in the form <code>f(row, index, @summaryMetrics, @seriesData)</code>\n  This is called on all rows every time you call getResults() so it's less efficient than deriveFieldsOnOutput. Only use it if you need\n  the @summaryMetrics in your calculation.</p>\n</div></div></div><div id='cfg-deriveFieldsOnInput' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-deriveFieldsOnInput' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-deriveFieldsOnInput' class='name not-expandable'>deriveFieldsOnInput</a><span> : Object[]</span></div><div class='description'><div class='short'><p>An Array of Maps in the form <code>{field:'myField', f:(fact)-&gt;...}</code></p>\n</div><div class='long'><p>An Array of Maps in the form <code>{field:'myField', f:(fact)-&gt;...}</code></p>\n</div></div></div><div id='cfg-deriveFieldsOnOutput' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-deriveFieldsOnOutput' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-deriveFieldsOnOutput' class='name expandable'>deriveFieldsOnOutput</a><span> : Object[]</span></div><div class='description'><div class='short'>same format at deriveFieldsOnInput, except the callback is in the form f(row)\n  This is only called for dirty rows th...</div><div class='long'><p>same format at deriveFieldsOnInput, except the callback is in the form <code>f(row)</code>\n  This is only called for dirty rows that were effected by the latest round of additions in an incremental calculation.</p>\n</div></div></div><div id='cfg-granularity' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-granularity' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-granularity' class='name expandable'>granularity</a><span> : String</span></div><div class='description'><div class='short'>'month', 'week', 'quarter', 'day', etc. ...</div><div class='long'><p>'month', 'week', 'quarter', 'day', etc. Use Time.MONTH, Time.WEEK, etc.</p>\n</div></div></div><div id='cfg-holidays' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-holidays' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-holidays' class='name expandable'>holidays</a><span> : Object[]</span></div><div class='description'><div class='short'>An optional Array containing rows that are either ISOStrings or JavaScript Objects\n  (mix and match). ...</div><div class='long'><p>An optional Array containing rows that are either ISOStrings or JavaScript Objects\n  (mix and match). Example: <code>[{month: 12, day: 25}, {year: 2011, month: 11, day: 24}, \"2012-12-24\"]</code>\n   Notice how you can leave off the year if the holiday falls on the same day every year.</p>\n</div></div></div><div id='cfg-summaryMetricsConfig' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-summaryMetricsConfig' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-summaryMetricsConfig' class='name expandable'>summaryMetricsConfig</a><span> : Object[]</span></div><div class='description'><div class='short'>Allows you to specify a list of metrics to calculate on the results before returning. ...</div><div class='long'><p>Allows you to specify a list of metrics to calculate on the results before returning.\n  These can either be in the form of <code>{as: 'myMetric', field: 'field4</code>, f:'sum'}<code>which would extract all of the values\n  for field</code>field4<code>and pass it as the values parameter to the</code>f<code>(</code>sum<code>in this example) function (from <a href=\"#!/api/Lumenize.functions\" rel=\"Lumenize.functions\" class=\"docClass\">Lumenize.functions</a>), or\n  it can be in the form of</code>{as: 'myMetric', f:(@seriesData, @summaryMetrics) -> ...}`. Note, they are calculated\n  in order, so you can use the result of an earlier summaryMetric to calculate a later one.</p>\n</div></div></div><div id='cfg-tz' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-tz' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-tz' class='name not-expandable'>tz</a><span> : String</span></div><div class='description'><div class='short'><p>The timezone for analysis</p>\n</div><div class='long'><p>The timezone for analysis</p>\n</div></div></div><div id='cfg-uniqueIDField' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-uniqueIDField' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-uniqueIDField' class='name expandable'>uniqueIDField</a><span> : String</span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<p>Defaults to: <code>&quot;ObjectID&quot;</code></p></div></div></div><div id='cfg-validFromField' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-validFromField' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-validFromField' class='name expandable'>validFromField</a><span> : String</span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<p>Defaults to: <code>&quot;_ValidFrom&quot;</code></p></div></div></div><div id='cfg-validToField' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-validToField' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-validToField' class='name expandable'>validToField</a><span> : String</span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<p>Defaults to: <code>&quot;_ValidTo&quot;</code></p></div></div></div><div id='cfg-workDayEndBefore' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-workDayEndBefore' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-workDayEndBefore' class='name expandable'>workDayEndBefore</a><span> : Object</span></div><div class='description'><div class='short'>An optional object in the form {hour: 17, minute: 0}. ...</div><div class='long'><p>An optional object in the form {hour: 17, minute: 0}. If minute is zero it can be omitted.\n   The use of workDayStartOn and workDayEndBefore only make sense when the granularity is \"hour\" or finer.\n   Note: If the business closes at 5:00pm, you'll want to leave workDayEndBefore to 17:00, rather\n   than 17:01. Think about it, you'll be open 4:59:59.999pm, but you'll be closed at 5:00pm. This also makes all of\n   the math work. 9am to 5pm means 17 - 9 = an 8 hour work day.</p>\n</div></div></div><div id='cfg-workDayStartOn' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-workDayStartOn' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-workDayStartOn' class='name expandable'>workDayStartOn</a><span> : Object</span></div><div class='description'><div class='short'>An optional object in the form {hour: 8, minute: 15}. ...</div><div class='long'><p>An optional object in the form {hour: 8, minute: 15}. If minute is zero it can be omitted.\n   If workDayStartOn is later than workDayEndBefore, then it assumes that you work the night shift and your work\n   hours span midnight. If tickGranularity is \"hour\" or finer, you probably want to set this; if tickGranularity is\n   \"day\" or coarser, probably not.</p>\n</div></div></div><div id='cfg-workDays' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-cfg-workDays' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-cfg-workDays' class='name expandable'>workDays</a><span> : String[]/String</span></div><div class='description'><div class='short'>List of days of the week that you work on. ...</div><div class='long'><p>List of days of the week that you work on. You can specify this as an Array of Strings\n   (['Monday', 'Tuesday', ...]) or a single comma seperated String (\"Monday,Tuesday,...\").</p>\n<p>Defaults to: <code>['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']</code></p></div></div></div></div></div><div class='members-section'><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Instance Methods</h3><div id='method-constructor' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-method-constructor' target='_blank' class='view-source'>view source</a></div><strong class='new-keyword'>new</strong><a href='#!/api/Lumenize.TimeSeriesCalculator-method-constructor' class='name expandable'>Lumenize.TimeSeriesCalculator</a>( <span class='pre'>config</span> ) : <a href=\"#!/api/Lumenize.TimeSeriesCalculator\" rel=\"Lumenize.TimeSeriesCalculator\" class=\"docClass\">Lumenize.TimeSeriesCalculator</a></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>config</span> : Object<div class='sub-desc'>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'><a href=\"#!/api/Lumenize.TimeSeriesCalculator\" rel=\"Lumenize.TimeSeriesCalculator\" class=\"docClass\">Lumenize.TimeSeriesCalculator</a></span><div class='sub-desc'>\n</div></li></ul></div></div></div><div id='method-addSnapshots' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-method-addSnapshots' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-method-addSnapshots' class='name expandable'>addSnapshots</a>( <span class='pre'>snapshots, startOn, endBefore</span> ) : TimeInStateCalculator<strong class='chainable signature' >chainable</strong></div><div class='description'><div class='short'>Allows you to incrementally add snapshots to this calculator. ...</div><div class='long'><p>Allows you to incrementally add snapshots to this calculator.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>snapshots</span> : Object[]<div class='sub-desc'><p>An array of temporal data model snapshots.</p>\n</div></li><li><span class='pre'>startOn</span> : String<div class='sub-desc'><p>A ISOString (e.g. '2012-01-01T12:34:56.789Z') indicating the time start of the period of\n  interest. On the second through nth call, this should equal the previous endBefore.</p>\n</div></li><li><span class='pre'>endBefore</span> : String<div class='sub-desc'><p>A ISOString (e.g. '2012-01-01T12:34:56.789Z') indicating the moment just past the time\n  period of interest.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>TimeInStateCalculator</span><div class='sub-desc'>\n</div></li></ul></div></div></div><div id='method-getResults' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-method-getResults' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-method-getResults' class='name expandable'>getResults</a>( <span class='pre'></span> ) : Object[]</div><div class='description'><div class='short'>Returns the current state of the calculator ...</div><div class='long'><p>Returns the current state of the calculator</p>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object[]</span><div class='sub-desc'><p>Returns an Array of Maps like <code>{&lt;uniqueIDField&gt;: &lt;id&gt;, ticks: &lt;ticks&gt;, lastValidTo: &lt;lastValidTo&gt;}</code></p>\n</div></li></ul></div></div></div><div id='method-getStateForSaving' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-method-getStateForSaving' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-method-getStateForSaving' class='name expandable'>getStateForSaving</a>( <span class='pre'>[meta]</span> ) : Object</div><div class='description'><div class='short'>Enables saving the state of this calculator. ...</div><div class='long'><p>Enables saving the state of this calculator. See class documentation for a detailed example.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>meta</span> : Object (optional)<div class='sub-desc'><p>An optional parameter that will be added to the serialized output and added to the meta field\n  within the deserialized calculator.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>Returns an Ojbect representing the state of the calculator. This Object is suitable for saving to\n  to an object store. Use the static method <code>newFromSavedState()</code> with this Object as the parameter to reconstitute\n  the calculator.</p>\n</div></li></ul></div></div></div></div><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Static Methods</h3><div id='static-method-newFromSavedState' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='Lumenize.TimeSeriesCalculator'>Lumenize.TimeSeriesCalculator</span><br/><a href='source/TimeSeriesCalculator.coffee.html#Lumenize-TimeSeriesCalculator-static-method-newFromSavedState' target='_blank' class='view-source'>view source</a></div><a href='#!/api/Lumenize.TimeSeriesCalculator-static-method-newFromSavedState' class='name expandable'>newFromSavedState</a>( <span class='pre'>p</span> ) : TimeInStateCalculator<strong class='static signature' >static</strong></div><div class='description'><div class='short'>Deserializes a previously saved calculator and returns a new calculator. ...</div><div class='long'><p>Deserializes a previously saved calculator and returns a new calculator. See class documentation for a detailed example.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>p</span> : String/Object<div class='sub-desc'><p>A String or Object from a previously saved state</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>TimeInStateCalculator</span><div class='sub-desc'>\n</div></li></ul></div></div></div></div></div></div></div>"});